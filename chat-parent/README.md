# Многопротокольный чат-сервер

Этот проект представляет собой реализацию клиент-серверного чата с поддержкой трех протоколов: Java-сериализации объектов, XML-протокола и REST/JSON API.

## Структура проекта

```
chat-parent/
├── chat-client/          # Клиентская часть (GUI на Swing)
├── chat-common/          # Общая библиотека (сообщения, протоколы)
├── chat-server/          # Серверная часть
├── chat-rest/            # REST API сервер
├── config/               # Конфигурационные файлы
│   └── server.properties # Настройки сервера
├── logs/                 # Директория для логов
│   ├── server/           # Логи сервера
│   │   ├── java/         # Логи при использовании Java-сериализации
│   │   ├── xml/          # Логи при использовании XML-протокола
│   │   └── rest/         # Логи при использовании REST API
│   └── client/           # Логи клиентов
│       ├── java/         # Логи при использовании Java-сериализации
│       └── xml/          # Логи при использовании XML-протокола
├── scripts/              # Скрипты для запуска
│   ├── start_chat.sh     # Запуск с Java-сериализацией
│   ├── start_chat_xml.sh # Запуск с XML-протоколом
│   └── start_chat_rest.sh # Запуск REST API сервера
└── pom.xml               # Maven POM файл
```

## Запуск приложения

### Компиляция

```bash
cd chat-parent
mvn clean package
```

### Запуск с Java-сериализацией

```bash
./scripts/start_chat.sh
```

### Запуск с XML-протоколом

```bash
./scripts/start_chat_xml.sh
```

### Запуск с REST API

```bash
./scripts/start_chat_rest.sh
```

## Особенности

- Поддержка трех протоколов: Java-сериализация, XML и REST/JSON
- Современный GUI с темной темой на базе Swing
- REST API для интеграции с веб-клиентами и мобильными приложениями
- WebSocket поддержка для real-time сообщений через REST API
- Swagger UI для документации REST API
- Логирование в отдельные файлы для каждого протокола
- Хранение истории сообщений
- Оповещения о входе/выходе пользователей
- Отображение списка активных пользователей

## Протоколы

### Java-сериализация

Использует стандартный механизм сериализации Java для передачи объектов между клиентом и сервером.

### XML-протокол

Передает сообщения в XML-формате с 4-байтовым заголовком, содержащим длину сообщения. Реализует обработку с использованием DOM-парсера.

### REST/JSON протокол

Предоставляет REST API с поддержкой JSON для взаимодействия с веб-клиентами и другими приложениями. Включает WebSocket для обмена сообщениями в реальном времени.

## REST API Endpoints

- `POST /api/chat/login` - Вход пользователя
- `POST /api/chat/logout` - Выход пользователя
- `POST /api/chat/message` - Отправка сообщения
- `GET /api/chat/users` - Получение списка активных пользователей
- `GET /api/chat/history` - Получение истории сообщений

## WebSocket Endpoints

- `ws://server:8080/ws` - WebSocket endpoint
- `/topic/messages` - Канал для сообщений чата
- `/topic/users` - Канал для обновлений списка пользователей
- `/app/send` - Endpoint для отправки сообщений

## Требования

- Java 11 или выше
- Maven для сборки
